{
  "url": "https://api.github.com/repos/lerna/lerna/issues/507",
  "repository_url": "https://api.github.com/repos/lerna/lerna",
  "labels_url": "https://api.github.com/repos/lerna/lerna/issues/507/labels{/name}",
  "comments_url": "https://api.github.com/repos/lerna/lerna/issues/507/comments",
  "events_url": "https://api.github.com/repos/lerna/lerna/issues/507/events",
  "html_url": "https://github.com/lerna/lerna/pull/507",
  "id": 201727438,
  "number": 507,
  "title": "Automatic hoisting of common dependencies",
  "user": {
    "login": "gigabo",
    "id": 115908,
    "avatar_url": "https://avatars.githubusercontent.com/u/115908?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gigabo",
    "html_url": "https://github.com/gigabo",
    "followers_url": "https://api.github.com/users/gigabo/followers",
    "following_url": "https://api.github.com/users/gigabo/following{/other_user}",
    "gists_url": "https://api.github.com/users/gigabo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gigabo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gigabo/subscriptions",
    "organizations_url": "https://api.github.com/users/gigabo/orgs",
    "repos_url": "https://api.github.com/users/gigabo/repos",
    "events_url": "https://api.github.com/users/gigabo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gigabo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 295312272,
      "url": "https://api.github.com/repos/lerna/lerna/labels/Tag:%20Enhancement",
      "name": "Tag: Enhancement",
      "color": "84b6eb",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2017-01-18T23:58:33Z",
  "updated_at": "2017-02-01T02:40:06Z",
  "closed_at": "2017-01-31T07:25:05Z",
  "pull_request": {
    "url": "https://api.github.com/repos/lerna/lerna/pulls/507",
    "html_url": "https://github.com/lerna/lerna/pull/507",
    "diff_url": "https://github.com/lerna/lerna/pull/507.diff",
    "patch_url": "https://github.com/lerna/lerna/pull/507.patch"
  },
  "body": "The main thing preventing React Server from migrating back to Lerna is the lack of automatic hoisting.  When I started trying to port that back from Asini, though, I realized that it was built on top of some other improvements... so here's a stack of changes that culminates with an option to automatically hoist common dependencies to the repo root.\r\n\r\nThe original PRs from Asini for these are:\r\n\r\n- [Add an option sieve for all commands](https://github.com/asini/asini/pull/15)\r\n- [Validate and standardize exposure of command classes](https://github.com/asini/asini/pull/18)\r\n- [Automatic hoisting of common dependencies to repo root](https://github.com/asini/asini/pull/36)\r\n\r\nThere was previously some discussion of hoisting in Lerna [here](https://github.com/lerna/lerna/issues/334).\r\n\r\nWhen I originally did this for Asini I did some perf testing against Babel.  I also had a branch with experimental Yarn support, so I compared them.  Hoisting actually provided a _bigger_ perf improvement than Yarn.  But the best part is they can be _combined_.  Here are bootstrap times on my laptop for Babel with and without hoisting/Yarn:\r\n\r\n```\r\n              hoist\r\n\r\n            no    yes\r\n          +-----+-----+\r\n        no| 30s | 12s |\r\nyarn      |-----+-----+\r\n       yes| 17s |  7s |\r\n          +-----+-----+\r\n```",
  "closed_by": {
    "login": "doug-wade",
    "id": 3477707,
    "avatar_url": "https://avatars.githubusercontent.com/u/3477707?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/doug-wade",
    "html_url": "https://github.com/doug-wade",
    "followers_url": "https://api.github.com/users/doug-wade/followers",
    "following_url": "https://api.github.com/users/doug-wade/following{/other_user}",
    "gists_url": "https://api.github.com/users/doug-wade/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/doug-wade/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/doug-wade/subscriptions",
    "organizations_url": "https://api.github.com/users/doug-wade/orgs",
    "repos_url": "https://api.github.com/users/doug-wade/repos",
    "events_url": "https://api.github.com/users/doug-wade/events{/privacy}",
    "received_events_url": "https://api.github.com/users/doug-wade/received_events",
    "type": "User",
    "site_admin": false
  }
}